<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- CLEAN MARKUP = GOOD KARMA.
      Hi source code lover,

      you're a curious person and a fast learner ;)
      Let's make something beautiful together. Contribute on Github:
      https://github.com/webslides/webslides

      Thanks!
    -->

    <!-- SEO -->
    <title>微前端qiankun实践</title>
    <meta name="description" content="WebSlides is the easiest way to make HTML presentations. Just essential features, clean code, and lovely CSS.">

    <!-- URL CANONICAL -->
    <!-- <link rel="canonical" href="http://your-url.com/permalink"> -->

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,700,700i%7CMaitree:200,300,400,600,700&amp;subset=latin-ext" rel="stylesheet">

    <!-- CSS Base -->
    <link rel="stylesheet" type='text/css' media='all' href="static/css/webslides.css">

    <!-- Optional - CSS SVG Icons (Font Awesome) -->
    <link rel="stylesheet" type="text/css" media="all" href="static/css/svg-icons.css">

    <!-- SOCIAL CARDS (ADD YOUR INFO) -->

    <!-- FACEBOOK -->
    <meta property="og:url" content="http://your-url.com/permalink"> <!-- EDIT -->
    <meta property="og:type" content="article">
    <meta property="og:title" content="Make a Keynote presentation using HTML"> <!-- EDIT -->
    <meta property="og:description" content="WebSlides is the easiest way to make HTML presentations. 120+ free slides ready to use."> <!-- EDIT -->
    <meta property="og:updated_time" content="2017-01-04T17:32:14"> <!-- EDIT -->
    <meta property="og:image" content="static/images/share-webslides.jpg" > <!-- EDIT -->

    <!-- TWITTER -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@webslides"> <!-- EDIT -->
    <meta name="twitter:creator" content="@jlantunez"> <!-- EDIT -->
    <meta name="twitter:title" content="Make a Keynote presentation using HTML"> <!-- EDIT -->
    <meta name="twitter:description" content="WebSlides is the easiest way to make HTML presentations. 120+ free slides ready to use."> <!-- EDIT -->
    <meta name="twitter:image" content="static/images/share-webslides.jpg"> <!-- EDIT -->

    <!-- FAVICONS -->
    <link rel="shortcut icon" sizes="16x16" href="static/images/favicons/favicon.png">
    <link rel="shortcut icon" sizes="32x32" href="static/images/favicons/favicon-32.png">
    <link rel="apple-touch-icon icon" sizes="76x76" href="static/images/favicons/favicon-76.png">
    <link rel="apple-touch-icon icon" sizes="120x120" href="static/images/favicons/favicon-120.png">
    <link rel="apple-touch-icon icon" sizes="152x152" href="static/images/favicons/favicon-152.png">
    <link rel="apple-touch-icon icon" sizes="180x180" href="static/images/favicons/favicon-180.png">
    <link rel="apple-touch-icon icon" sizes="192x192" href="static/images/favicons/favicon-192.png">

    <!-- Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#333333">
  </head>
  <body>
    <header role="banner">
      <nav role="navigation">
        <ul>
          <li class="twitter">
            <a rel="external" href="#">
              导出
            </a>
          </li>
          <!--  <li class="dribbble"><a rel="external" href="http://dribbble.com/webslides" title="Dribbble"><svg class="fa-dribbble"><use xlink:href="#fa-dribbble"></use></svg> <em>webslides</em></a></li> -->
        </ul>
      </nav>
    </header>

    <main role="main">
      <article id="webslides">

        <!-- Quick Guide
          - Each parent <section> in the <article id="webslides"> element is an individual slide.
          - Vertical sliding = <article id="webslides" class="vertical">
          - <div class="wrap"> = container 90% / <div class="wrap size-50"> = 45%;
        -->

        <section class="bg-apple aligncenter">
          <!--.wrap = container (width: 90%) -->
          <div class="wrap">
            <!-- <h1><img class="whitelogo" src="static/images/logos/apple.svg" alt="Apple Logo"></h1> -->
            <h1>微前端qiankun实践</h1>
            <p style="text-align: right;
            width: 28%;
            margin: 50px auto 0;">分享人：漆林杰</p>
            <p style="text-align: right;
            width: 28%;
            margin: 10px auto 0;">来自武汉客服系统团队IM前端组</p>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple">
          <!--.wrap = container (width: 90%) -->
          <div class="wrap size-50">
            <h2>分享主要内容</h2>
            <ul>
              <li><a href="#slide=3">微前端是什么</a></li>
              <li><a href="#slide=5">分享背景</a></li>
              <li><a href="#slide=40">微前端不同实现方式</a></li>
              <li>
                <a href="#slide=6">微前端各方式差异</a>
                <ol>
                  <li><a href="#slide=7">iframe</a></li>
                  <li><a href="#slide=7">nginx</a></li>
                  <li><a href="#slide=9">qiankun</a></li>
                </ol>
              </li>
              <li><a href="#slide=9">qiankun原理</a></li>
              <li><a href="#slide=11">参考文献</a></li>
              <li><a href="#slide=12">demo地址</a></li>
              <li><a href="#slide=13">谢谢观看</a></li>
            </ul>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple aligncenter">
          <!--.wrap = container (width: 90%) -->
          <div class="wrap">
            <h2>微前端是什么？</h2>
            <p>微前端就是与多个可以独立发布功能的团队一起构建现代化web应用程序的技术、策略和方法，将大而可怕的事物分割成更小、更易于管理的部分，
              然后明确它们之间的依赖关系。我们的技术选择，我们的代码库，我们的团队，以及我们的发布过程都应该能够相互独立地操作和进化，而不需要过度的协调。
              微前端架构是一种类似于微服务的架构，它将微服务的理念应用于浏览器端，即将 Web 应用由单一的单体应用转变为多个小型前端应用聚合为一的应用
             </p>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple">
            <div class="wrap">
              <h2>微前端架构具备以下几个核心价值</h2>
              <ul style="width: 70%">
                <li>技术栈无关
                  主框架不限制接入应用的技术栈，微应用具备完全自主权</li>
                <li>独立开发、独立部署
                  微应用仓库独立，前后端可独立开发，部署完成后主框架自动完成同步更新</li>
                <li>增量升级
                  在面对各种复杂场景时，我们通常很难对一个已经存在的系统做全量的技术栈升级或重构，而微前端是一种非常好的实施渐进式重构的手段和策略</li>
                <li>独立运行时
                  每个微应用之间状态隔离，运行时状态不共享</li>
              </ul>
            </div>
        </section>
        <section class="bg-apple aligncenter">
          <div class="wrap">
            <h2>分享背景</h2>
            <p>
              在之前的工作中通过iframe嵌入和nginx代理的方式实现的微前端我都有接触,
              在这个过程中，不管是iframe的方式或者是nginx的方式在开发和部署的时候都相对来说比较麻烦，于是乎就萌生了一个想法-
              对现有的这种微前端的方式做一个改造，在经过一系列的调研之后选中了阿里qiankun，后期因为个人原因没有实现这种架构的
              改造，所以今天就借着这个机会和大家一起来探讨一下乾坤这个框架
            </p>
          </div>
        </section>
        <section class="bg-apple">
          <div class="wrap size-50">
            <h2>微前端不同实现方式</h2>
            <p style="margin-left: 0;
            text-indent: 0;
            margin-bottom: 20px;">目前最常用的实现微前端的三种方式，
            下面我将介绍这几种模式如何开发部署，以及三者之间的差异：</p>
            <ul>
              <li><a>iframe</a></li>
              <li><a>nginx代理</a></li>
              <li><a>qiankun</a></li>
            </ul>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple">
          <div class="wrap">
            <div class="grid vertical-align">
              <div class="column" style="justify-content: unset">
                <h2>iframe</h2>
                <p style="width: 100%; margin-bottom: 30px">iframe 虽不是为微前端而生，但是是集成的最简单方式之一。本质上来说，iframe 里的页面是完全独立的，
                  而且 iframe 还提供了很多的隔离机制，我们只需将单体的前端应用，按照业务模块进行拆分，分别部署，最后通过 iframe 进行动态加载即可</p>
                
                  <ul>
                    <li>优点：实现简单，运行稳定，天然具备隔离性。</li>
                    <li>缺点：主页面和 iframe 共享最大允许的 HTTP 链接数，iframe 阻塞主页面加载，浏览器的后退按钮无效，
                      性能低、通信复杂、双滚动条、弹窗无法全局覆盖，它的扩展性不高，只适合简单的页面渲染。
                    </li>
                  </ul>
              </div>
              <div class="column">
                <pre>
                  <xmp>
                    <el-tab-pane 
                      v-for="item in tabList" 
                      :label="item.label" 
                      :name="item.name"
                    >
                      <iframe 
                        v-show="activeTab === item.name" 
                        :src="item.src"
                      >
                    </iframe>
                    </el-tab-pane>
                      
                      tabList: [
                        {
                          name: 'sub-vue',
                          label: 'sub-vue',
                          src: 'http://localhost:8080'
                        },
                        {
                          name: 'sub-react',
                          label: 'sub-react',
                          src: 'http://localhost:8081'
                        },
                      ]
                  </xmp>
                </pre>
              </div>
            </div>       
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple">
          <!--.wrap o <nav> = container 1200px -->
          <div class="wrap">
            <div class="grid vertical-align">
              <div class="column">
                <h2>目录结构</h2>
                <img width="80%" src="./static/images/micro-dir.png" alt="">
              </div>

              <div class="column">
                <h2>部署</h2>
                <span style="margin-top: 15px;">运行npm run build将子应用打包</span>
                <span style="margin-bottom: 15px;">nginx配置文件开启两个端口，启动nginx，就可以访问了</span>
                <img width="80%" src="./static/images/nginx.png" alt="">
              </div>
            </div>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple">
          <div class="wrap">
            <h2>主要问题</h2>
            <ul>
              <li>子应用之间，子应用与主应用之间的通信问题</li>
              <li>主应用和子应用之间cookie共享</li>
              <li>iframe状态保存与卡顿问题</li>
            </ul>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple">
          <!--.wrap = container (width: 90%) -->
          <div class="wrap">
            <h2>qiankun</h2>
            <div class="grid vertical-align">
              <div class="column">
                <h3>qiankun核心设计理念</h3>
                <ul>
                  <li>
                    <ul style="width: 90%;">
                      <li>
                        <b>简单</b>
                        <span>由于主应用微应用都能做到技术栈无关，qiankun 对于用户而言只是一个类似 jQuery 的库，
                          你需要调用几个 qiankun 的 API 即可完成应用的微前端改造。同时由于 qiankun 的 HTML entry 及沙箱的设计，
                          使得微应用的接入像使用 iframe 一样简单</span>
                      </li>
                      <li>
                        <b>解耦/技术栈无关</b>
                        <span>
                          微前端的核心目标是将巨石应用拆解成若干可以自治的松耦合微应用，而 qiankun 的诸多设计均是秉持这一原则，
                          如 HTML entry、沙箱、应用间通信等。这样才能确保微应用真正具备 独立开发、独立运行 的能力
                        </span>
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>

              <div class="column">
                <h3>特性</h3>
                <ul>
                  <li>
                    <ul style="width: 90%;">
                      <li>
                        <b> 基于 single-spa 封装</b>
                        <span>提供了更加开箱即用的 API</span>
                      </li>
                      <li>
                        <b>技术栈无关</b>
                        <span>
                          任意技术栈的应用均可 使用/接入，不论是 React/Vue/Angular/JQuery 还是其他等框架
                        </span>
                      </li>
                      <li>
                        <b>HTML Entry 接入方式</b>
                        <span>
                          让你接入微应用像使用 iframe 一样简单
                        </span>
                      </li>
                      <li>
                        <b>样式隔离</b>
                        <span>
                          确保微应用之间样式互相不干扰
                        </span>
                      </li>
                      <li>
                        <b>JS 沙箱</b>
                        <span>
                          确保微应用之间 全局变量/事件 不冲突
                        </span>
                      </li>
                      <li>
                        <b>资源预加载</b>
                        <span>
                          在浏览器空闲时间预加载未打开的微应用资源，加速微应用打开速度
                        </span>
                      </li>
                      <li>
                        <b>umi 插件</b>
                        <span>
                          提供了 <a href="https://github.com/umijs/plugins/tree/master/packages/plugin-qiankun" target="_blank">@umijs/plugin-qiankun</a> 供 umi 应用一键切换成微前端架构系统
                        </span>
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple aligncenter">
          <div class="wrap">
            <h2>demo地址</h2>
            <h5>代码地址：<a href="https://github.com/snoop-dog/micro-front-example" target="_blank">
              micro-front-example</a></h5>
            <h5>演示地址：<a href="https://github.com/snoop-dog/micro-front-example" target="_blank">
                micro-front-example</a></h5>
            <!--end .cta -->
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple">
          <!-- .wrap = container (width: 90%) -->
          <div class="wrap size-50">
            <h2>参考文献</h2>
            <ul>
              <li><a href="https://microfrontends.com" target="_blank">microfrontends</a></li>
              <li><a href="https://juejin.cn/post/6875462470593904653#heading-18" target="_blank">微前端qiankun从搭建到部署的实践</a></li>
              <li><a href="https://blog.csdn.net/qq_42783654/article/details/116042226" target="_blank">微前端是什么？为什么要用微前端？</a></li>
              <li><a href="https://xw.qq.com/cmsid/20211213A09A5J00" target="_blank">基于 iframe 的全新微前端方案</a></li>
              <li><a href="https://segmentfault.com/a/1190000041710666?utm_source=sf-similar-article" target="_blank">浅谈微前端</a></li>
              <li><a href="https://qiankun.umijs.org/zh/" target="_blank">qiankun官网</a></li>
              <li><a href="https://zhuanlan.zhihu.com/p/78362028" target="_blank">可能是你见过最完善的微前端解决方案</a></li>
              <li><a href="https://zhuanlan.zhihu.com/p/95085796" target="_blank">微前端的核心价值</a></li>
            </ul>
          </div>
          <!-- .end .wrap -->
        </section>
        <section class="bg-apple aligncenter">
          <h2 class="text-emoji zoomIn">😎</h2>
          <h3><strong>Thank you!</strong></h2>
        </section>

      </article>
    </main>
    <!--main-->

    <!-- Required -->
    <script src="static/js/webslides.js"></script>

    <script>
      window.ws = new WebSlides();
    </script>

    <!-- OPTIONAL - svg-icons.js (fontastic.me - Font Awesome as svg icons) -->
    <script defer src="static/js/svg-icons.js"></script>

  </body>
</html>
